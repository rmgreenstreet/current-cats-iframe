<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
      setTimeout(function(){
      let masonryScript = document.createElement( 'script' );
      masonryScript.setAttribute('src', 'https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js');
      masonryScript.setAttribute('integrity', "sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D");
      masonryScript.setAttribute('crossorigin', 'anonymous');
      document.body.appendChild(masonryScript);	
      let bootstrapScript = document.createElement( 'script' );
      masonryScript.setAttribute('src', 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js');
      masonryScript.setAttribute('integrity', "sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz");
      masonryScript.setAttribute('crossorigin', 'anonymous');
      document.body.appendChild(masonryScript);	
      }, 500);
      </script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script> -->
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <title>All Cats Iframe</title>
</head>
<body>
  <div class="container">
    <div class="row card-row" data-masonry='{"percentPosition": true }'>
      <% for (let cat of data.collection) { %>
        <div class="col-sm-6 col-lg-3 mb-4">
          <img src="<%= cat.images[0].image.url %>" alt="" srcset="" class="rounded-4 card-img-top">
          <div class="card my-1">
            <div class="card-body">
              <h4 class="card-title"><%= cat.name.slice(20) %></h4>
              <% // Add Cat Color Pattern
              let descriptivePattern = cat.pet_attributes.filter((attribute) => attribute.id === 36802)
              if (!descriptivePattern.value || descriptivePattern.value === "N/A") {
                  let patternString = []
                  if (cat.primary_color && cat.primary_color !== "N/A") {patternString.push(`${cat.primary_color}`)}
                  if (cat.secondary_color && cat.secondary_color !== "N/A") {patternString.push(`& ${cat.secondary_color}`)}
                  if (cat.tertiary_color && cat.tertiary_color !== "N/A") {patternString.push(`& ${cat.tertiary_color}`)}
                  if (cat.coat_pattern && cat.coat_pattern !== "N/A") {patternString.push(cat.coat_pattern)}
                  descriptivePattern = patternString.join(" ");
              } %>
              <% if(typeof cat.coat_pattern !== undefined) { %>
                <h5 class="card-subtitle"><%= descriptivePattern %></h5>
              <% } %>
              <ul>
                <li><%= cat.sex %></li>
                <% if(typeof cat.numerical_age !== undefined) { %>
                  <li>Age: <%= cat.numerical_age %></li>
                <% } %>
              </ul>
              <p class="card-text"><%= cat.pet_internal_notes %></p>
              <ul>
                <li>
                  Gets along with Dogs: <%= cat.is_ok_with_other_dogs %>
                </li>
                <li>
                  Gets along with Cats: <%= cat.is_ok_with_other_cats %>
                </li>
                <li>
                  Gets along with Children: <%= cat.is_ok_with_other_kids %>
                </li>
              </ul>
              <a href="https://petstablished.com/adoptions/personal-information?application_type=Adopt&form_id=<%= cat.adoption_form_id %>&pet_id=<%= cat.id %>" class="btn btn-dark" target="_blank">Adopt <%= cat.name.slice(20) %></a>
            </div>
          </div>
        </div>
      <% } %>
    </div>
  </div>
</body>
</html>